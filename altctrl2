getgenv().owner = "feverplague"


local admins = {}
local Connections = {}
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local hostvar1 = getgenv().owner 


local host = Players:FindFirstChild(hostvar1)

if not host then 
game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Error";
        Text = "Host not here!";
        Duration = 5;})
end

local function GetPlayerFromString(str,ignore)
	for i,Targ in pairs(game.Players:GetPlayers()) do 
		if not ignore and Targ == localplayer then
			continue
		end
		if Targ.Name:lower():sub(1,#str) == str:lower() or  Targ.DisplayName:lower():sub(1,#str) == str:lower()  then
			return Targ
		end
	end
	return nil
end

function getRoot(char)
	local rootPart = char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
	return rootPart
end

function Chat(Message, Whisper)
	game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(Message, Whisper or "ALl")
end


local admins = {}
local loopkill = {}
local states = {}
local temp = {}
local chattingjoin = false
local summoned = false

function getpos()
    return hrp.CFrame
end

function getcampos()
    return workspace.CurrentCamera.CFrame
end

function getteam()
    return game.Players.LocalPlayer.TeamColor.Name
end


loadstring(game:HttpGet("https://raw.githubusercontent.com/frvaunted/a/main/chatspy", true))() -- Chatspy

repeat wait() until game:IsLoaded()
for i,v in pairs(getconnections(game.Players.LocalPlayer.Idled)) do -- antiafk
    v:Disable()
end


Connections["OnChat"] = game.ReplicatedStorage.DefaultChatSystemChatEvents.OnMessageDoneFiltering.OnClientEvent:Connect(function(data)
    local Message = data.Message
    local Speaker = game.Players[data.FromSpeaker]
    
    -- Check if the player is not the owner and not an admin
    if Speaker.Name ~= getgenv().owner and not admins[Speaker.UserId] then
        return
    end
    
    Message = string.lower(Message)
    local Args = string.split(Message, " ")
    local AmountOfArgs = #Args
 
if Args[1] == ".bring" then
	game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid").Sit = False
	game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = Speaker.Character.Head.CFrame * CFrame.new(0,1,0)

elseif Message == ".rejoin" then
	game:GetService'TeleportService':TeleportToPlaceInstance(game.PlaceId,game.JobId,game:GetService'Players'.LocalPlayer)

elseif Args[1] == ".goto" then
	local FoundPlayer = GetPlayerFromString(Args[2])
    if FoundPlayer then
	    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = FoundPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0,2,0)
    end

    viewing = nil
elseif Args[1] == ".view" then
	local TargetPlr =  GetPlayerFromString(Args[2])
		if viewDied then
			viewDied:Disconnect()
			viewChanged:Disconnect()
		end
		viewing = TargetPlr
		workspace.CurrentCamera.CameraSubject = TargetPlr.Character
		local function viewDiedFunc()
			repeat wait() until TargetPlr.Character ~= nil and getRoot(TargetPlr.Character)
			workspace.CurrentCamera.CameraSubject = TargetPlr.Character
		end	
		viewDied = TargetPlr.CharacterAdded:Connect(viewDiedFunc)
		local function viewChangedFunc()
			workspace.CurrentCamera.CameraSubject = TargetPlr.Character
		end
		viewChanged = workspace.CurrentCamera:GetPropertyChangedSignal("CameraSubject"):Connect(viewChangedFunc)

elseif Message == ".unview" then
	if viewing ~= nil then
		viewing = nil
	end
	if viewDied then
		viewDied:Disconnect()
		viewChanged:Disconnect()
	end
	workspace.CurrentCamera.CameraSubject = game.Players.LocalPlayer.Character

elseif Message == ".clip" then
		Noclipping:Disconnect()

elseif Args[1] == ".re" then
            game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(2^7,5^34,4^7)
            task.wait(0.4)
            game.Players.LocalPlayer.Character.Head:Destroy()
            task.wait()
            character.Humanoid.Health = 0

getgenv().summoned = false
elseif Args[1] == ".s" then
    local plr = game.Players.LocalPlayer
    local Humanoid = plr.Character:FindFirstChildWhichIsA('Humanoid')
    local mouse = plr:GetMouse()
    localplayer = plr
    if workspace:FindFirstChild("Core") then
        workspace.Core:Destroy()
    end
    local Core = Instance.new("Part")
    Core.Name = "Core"
    Core.Size = Vector3.new(0.05, 0.05, 0.05)
    spawn(function()
        Core.Parent = workspace
        local Weld = Instance.new("Weld", Core)
        Weld.Part0 = Core
        Weld.Part1 = localplayer.Character.LowerTorso
        Weld.C0 = CFrame.new(0, 0, 0)
    end)
    workspace:WaitForChild("Core")
    local torso = workspace.Core
        getgenv().summoned = true
        while getgenv().summoned == true do 
        repeat
            task.wait()
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = Speaker.Character.HumanoidRootPart.CFrame * CFrame.new(0,3,5)
        until getgenv().summoned == false
        end

elseif Args[1] == ".v" then
        getgenv().summoned = false
        task.wait(0.3)
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game.Workspace.SafetyPlat.CFrame * CFrame.new(0,5,0)
        
elseif Args[1] == ".admin" then
        local Player = GetPlayerFromString(Args[2])
        if Player ~= nil and not admins[Player.UserId] then
            admins[Player.UserId] = {Player = Player}
            Chat("/w "..Player.Name.." You've got admin permissions!")
        end

    end
end)

game.Workspace.FallenPartsDestroyHeight = -9e9
    local part = Instance.new("Part")
    part.Size = Vector3.new(100, 2, 100)
    part.Name = "SafetyPlat"
    part.Parent = game.Workspace
    part.Anchored = true
    local pl = game.Players.LocalPlayer.Character
    part.Position = Vector3.new(-897.6600952148438, -2550.0717163085938, -709.875732421875)
    pl.HumanoidRootPart.CFrame = part.CFrame * CFrame.new(0,5,0)

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "V 0.5";
    Text = "PRE-RELEASE";
    Duration = 10;})
