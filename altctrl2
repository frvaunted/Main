getgenv().owner = "feverplague"

local admins = {}
local Connections = {}
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local hostvar1 = getgenv().owner 

local localplayer = Players.LocalPlayer
local character = localplayer.Character
local hrp = character.HumanoidRootPart

local host = Players:FindFirstChild(hostvar1)

if not host then 
game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Error";
        Text = "Host not here!";
        Duration = 5;})
end

local function GetPlayerFromString(str,ignore)
	for i,Targ in pairs(game.Players:GetPlayers()) do 
		if not ignore and Targ == localplayer then
			continue
		end
		if Targ.Name:lower():sub(1,#str) == str:lower() or  Targ.DisplayName:lower():sub(1,#str) == str:lower()  then
			return Targ
		end
	end
	return nil
end

function getRoot(char)
	local rootPart = char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
	return rootPart
end

function Chat(Message, Whisper)
	game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(Message, Whisper or "ALl")
end

function float()
    local Float = Instance.new('Part')
    Float.Parent = game.Players.LocalPlayer.Character
    Float.Transparency = 1
    Float.Size = Vector3.new(2,0.2,1.5)
    Float.Anchored = true
    local FloatValue = -3.46
    Float.CFrame = hrp.CFrame * CFrame.new(0,FloatValue,0)
end

local admins = {}
local loopkill = {}
local states = {}
local temp = {}
local chattingjoin = false
local summoned = false

function getpos()
    return hrp.CFrame
end

function getcampos()
    return workspace.CurrentCamera.CFrame
end

function getteam()
    return game.Players.LocalPlayer.TeamColor.Name
end

loadstring(game:HttpGet("https://raw.githubusercontent.com/frvaunted/a/main/chatspy", true))() -- Chatspy

repeat wait() until game:IsLoaded()
for i,v in pairs(getconnections(game.Players.LocalPlayer.Idled)) do -- antiafk
    v:Disable()
end


Connections["OnChat"] = game.ReplicatedStorage.DefaultChatSystemChatEvents.OnMessageDoneFiltering.OnClientEvent:Connect(function(data)
    local Message = data.Message
    local plr = game.Players[data.FromSpeaker]
    
    -- Check if the player is not the owner and not an admin
    if plr.Name ~= getgenv().owner --[[and not admins[plr.UserId]] then
        return
    end
    
    Message = string.lower(Message)
    local Args = string.split(Message, " ")
    local AmountOfArgs = #Args
    
    if Args[1] == ".admin" then
        local Player = GetPlayerFromString(Args[2])
        if Player ~= nil and not admins[Player.UserId] then
            admins[Player.UserId] = {Player = Player}
            Chat("/w "..Player.Name.." You've got admin permissions!")
        end

    elseif Args[1] == ".rejoin" then
         game:GetService('TeleportService'):Teleport(game.PlaceId, game.Players.LocalPlayer) 

    elseif Args[1] == ".re" then
        game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(2^7,5^34,4^7)
        task.wait(0.4)
        game.Players.LocalPlayer.Character.Head:Destroy()
        task.wait()
        character.Humanoid.Health = 0

    elseif Args[1] == ".log" then
        game:Shutdown()

    elseif Args[1] == ".bring" then
        hrp.CFrame = plr.Character.Head.CFrame * CFrame.new(0,2,0)

    elseif Args[1] == ".safety" then
        if game.Workspace:FindFirstChild("SafetyPlat")then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game.Workspace.SafetyPlat.CFrame * CFrame.new(0,5,0)
         else
             game.Workspace.FallenPartsDestroyHeight = -9e9
             local part = Instance.new("Part")
             part.Size = Vector3.new(100, 2, 100)
             part.Name = "SafetyPlat"
             part.Parent = game.Workspace
             part.Anchored = true
             local pl = game.Players.LocalPlayer.Character
             part.Position = Vector3.new(-897.6600952148438, -2550.0717163085938, -709.875732421875)
             pl.HumanoidRootPart.CFrame = part.CFrame * CFrame.new(0,5,0)
         end

    elseif Args[1] == ".summon" then
        summoned = true
        local player = game.Players.LocalPlayer
        local Flyanimation = Instance.new('Animation', game.Workspace)
        Flyanimation.AnimationId = 'rbxassetid://3541044388'
        local Idleanimation = Instance.new('Animation', game.Workspace)
        Idleanimation.AnimationId = 'rbxassetid://3541114300'
        local HeroIdle = character.Humanoid:LoadAnimation(Idleanimation)
        local HeroFly = character.Humanoid:LoadAnimation(Flyanimation)
        Idleing2 = true
        
            local function flyanim()
                    --HeroIdle:Stop()
                    local FlyingA = false
                    for i,v in pairs(character.Humanoid:GetPlayingAnimationTracks()) do
                        if v.Animation.AnimationId == 'rbxassetid://3541044388' then
                            FlyingA = false
                        end
                        if v.Animation.AnimationId == 'rbxassetid://2788289281' then
                            v:Stop()
                        end
                        if v.Animation.AnimationId == 'rbxassetid://2788292075' then
                            v:Stop()
                        end
                    end
                    if FlyingA == false and Idleing2 == false then
                        HeroFly:Play()
                    end
            end
            repeat task.wait()
            float()
            HeroIdle:Play()
            hrp.CFrame = plr.Character.HumanoidRootPart.CFrame * CFrame.new(0,3,5)
            until summoned == false or not plr or not plr.Character or not character or not localplayer or not hrp or not plr.Character.HumanoidRootPart

    elseif Args[1] == ".vanish" then
        summoned = false
        task.wait()
        hrp.CFrame = game.Workspace.SafetyPlat.CFrame * CFrame.new(0,5,0)
        task.wait()
        for i,v in pairs(character.Humanoid:GetPlayingAnimationTracks()) do
            if v.Animation.AnimationId == 'rbxassetid://3541114300' then
                v:Stop()
            end
        end

    elseif Args[1] == ".goto" then
    local Player = GetPlayerFromString(Args[2])
    hrp.CFrame = Player.Character.Head.CFrame * CFrame.new(0,2,0)


    end
end)


game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "V 0.2";
    Text = "PRE-RELEASE";
    Duration = 10;})
